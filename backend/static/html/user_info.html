<h3>ğŸ”‘ ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</h3>

<form id="change-form" class="form-box">
  <label for="current">í˜„ì¬ ë¹„ë°€ë²ˆí˜¸</label>
  <input type="password" id="current" placeholder="í˜„ì¬ ë¹„ë°€ë²ˆí˜¸" required />

  <label for="new">ìƒˆ ë¹„ë°€ë²ˆí˜¸</label>
  <input type="password" id="new" placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸" required />

  <button type="submit" class="small-button">ë³€ê²½</button>
</form>

<script>
  document.getElementById("change-form").addEventListener("submit", async (e) => {
    e.preventDefault();
    const current = document.getElementById("current").value.trim();
    const newPass = document.getElementById("new").value.trim();

    const res = await fetch(`/api/change-password`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ current, new: newPass }),
    });

    if (res.ok) {
      alert("ë¹„ë°€ë²ˆí˜¸ê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.");
      location.href = "";
    } else {
      alert("ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì‹¤íŒ¨");
    }
  });
</script>